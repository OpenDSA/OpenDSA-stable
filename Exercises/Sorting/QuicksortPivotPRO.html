<!--
Quicksort mini-proficiency exercise.
Written by Gayathri Subramanian, Dan Breakiron, and Cliff Shaffer
-->
<!DOCTYPE html>
<html data-require="math">
<head>
  <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
  <title>Quicksort Find Pivot Element</title>
  <script src="../../lib/jquery.min.js"></script>
  <script src="../../lib/jquery-ui.min.js"></script>
  <script src="../../JSAV/lib/jquery.transform.light.js"></script>
  <script type="text/javascript" src="http://cdn.mathjax.org/mathjax/1.1-latest/MathJax.js?config=http://algoviz.org/OpenDSA/dev/OpenDSA/ODSAkhan-exercises/KAthJax-77111459c7d82564a705f9c5480e2c88.js"></script>
  <script>urlBaseOverride = "../../ODSAkhan-exercises/";</script>
  <script src="../../ODSAkhan-exercises/khan-exercise.js"></script>
  <script src="../../JSAV/build/JSAV-min.js"></script>
  <link rel="stylesheet" href="../../JSAV/css/JSAV.css" type="text/css" />

  <style>
    .jsavcontainer {
      border: 0;
      width: 100%;
    }
  </style>
<head>

<body>
<script>
"use strict";
var arr, selIndex = -1;

// function to handle a click event on an array
var clickHandler = function (index, e) {
  if (arr.isHighlight(index)) {
    arr.unhighlight(index);
    selIndex = -1;
  } else {
    // Unhighlight a previous answer, if applicable
    if (selIndex !== -1) {
      arr.unhighlight(selIndex);
    }
    arr.highlight(index);
    selIndex = index;
  }
};

// Initialize the JSAV array
var initJSAV = function (length) {
  var jsav = new JSAV("jsav");
  arr = jsav.ds.array(JSAV.utils.rand.numKeys(0, 999, length),
                      {indexed: true, center: false});
  // bind the clickHandler to handle click events on the array
  arr.click(clickHandler);
  selIndex = -1;
};

// Validates the student's answer
var checkAnswer = function (length) {
  var pivot = Math.floor((length - 1) / 2);
  if (arr.isHighlight(pivot)) {
    return true;
  }
  return false;
};
</script>

<div class="exercise">
  <div class="vars">
    <var id="arr_size">randRange(6, 12)</var>
    <var id="JSAV">initJSAV(arr_size)</var>
  </div>
  <div class="problems">
    <div> <!-- Supresses answer box -->
      <div class="question">
        <p> Hightlight the pivot element for Quicksort in the array
          displayed below.The left pointer is at index 0 and the right
          pointer is at index <var>arr_size - 1</var>
          <div id="jsav"></div>
      </div>
      <div class="solution" data-type="custom">
        <div class="guess">[selIndex !== -1]</div>
        <div class="validator-function">
          return checkAnswer(arr_size);
        </div>
      </div>
      <div class="hints">
        <p>The pivot element is at the center of the array</p>
      </div>
    </div>
  </div>
</div>
</body>
</html>
